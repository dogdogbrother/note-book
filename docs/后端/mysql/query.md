## 准备工作

要写查询例子,就得先有数据.写个学生信息表`student_info`和学生成绩表`student_score`,并往里面加数据:
**学生基本信息表的结构**
```shell
CREATE TABLE student_info (
  number INT PRIMARY KEY,
  name VARCHAR(5),
  sex ENUM('男', '女'),
  id_number CHAR(18),
  department VARCHAR(30),
  major VARCHAR(30),
  enrollment_time DATE,
  UNIQUE KEY (id_number)
);
```
**学生成绩表的结构**
```shell
CREATE TABLE student_score (
  number INT,
  subject VARCHAR(30),
  score TINYINT,
  PRIMARY KEY (number, subject),
  CONSTRAINT FOREIGN KEY(number) REFERENCES student_info(number)
);
```
**加数据**
```
INSERT INTO student_info(number, name, sex, id_number, department, major, enrollment_time) VALUES
  (20180101, '杜子腾', '男', '158177199901044792', '计算机学院', '计算机科学与工程', '2018-09-01'),
  (20180102, '杜琦燕', '女', '151008199801178529', '计算机学院', '计算机科学与工程', '2018-09-01'),
  (20180103, '范统', '男', '17156319980116959X', '计算机学院', '软件工程', '2018-09-01'),
  (20180104, '史珍香', '女', '141992199701078600', '计算机学院', '软件工程', '2018-09-01'),
  (20180105, '范剑', '男', '181048199308156368', '航天学院', '飞行器设计', '2018-09-01'),
  (20180106, '朱逸群', '男', '197995199501078445', '航天学院', '电子信息', '2018-09-01');
```
```
INSERT INTO student_score (number, subject, score) VALUES
(20180101, '母猪的产后护理', 78),
(20180101, '论萨达姆的战争准备', 88),
(20180102, '母猪的产后护理', 100),
(20180102, '论萨达姆的战争准备', 98),
(20180103, '母猪的产后护理', 59),
(20180103, '论萨达姆的战争准备', 61),
(20180104, '母猪的产后护理', 55),
(20180104, '论萨达姆的战争准备', 46);
```

## 查询单个列
```
SELECT 列名 FROM 表名;
```
```
mysql> SELECT number FROM student_info;
+----------+
| number   |
+----------+
| 20180104 |
+----------+
6 rows in set (0.00 sec)
```
查询还可以使用别名查询:
```
mysql> SELECT number AS 学号 FROM student_info;
+----------+
| 学号     |
+----------+
| 20180104 |
+----------+
6 rows in set (0.00 sec)
```
> AS是可选的,不写的话用空格代替也是能查到的.

## 查询多个列
```
SELECT 列名1, 列名2, ... 列名n FROM 表名;
```
* 依旧可以使用`AS`别名.
* 查询展示的列的位置完全按照书写顺序,甚至可以写多个同名列.

## 查询所有列
```
SELECT * FROM 表名;
```

## 结果去重

### 去除单列的重复结果
```
SELECT DISTINCT 列名 FROM 表名;
```
```
mysql> SELECT DISTINCT department FROM student_info;
+-----------------+
| department      |
+-----------------+
| 计算机学院      |
| 航天学院        |
+-----------------+
```

### 去除多列的重复结果
多列重复的意思是,每个列的值都一致,算为重复.
```
SELECT DISTINCT 列名1, 列名2, ... 列名n  FROM 表名;
```

## 限制查询结果条数

在查询语句结尾加上`LIMIT`:
```
查询语句 LIMIT 开始行, 限制条数;
```
```
SELECT * FROM student_info LIMIT 0, 2;
```
结果为查到表中的前2条数据.

如果指定的**开始行**大于结果中的行数，那查询结果就什么都没有,例如`LIMIT 100, 2;`查询到的是0.

## 按照单个列的值排序
```
ORDER BY 列名 ASC|DESC
```
**ASC**是由小到大,也叫**升序**,**DESC**由大到小,也叫**降序**.
```shell
mysql> SELECT * FROM student_score ORDER BY score ASC;
+----------+-----------------------------+-------+
| number   | subject                     | score |
+----------+-----------------------------+-------+
| 20180104 | 论萨达姆的战争准备          |    46 |
| 20180104 | 母猪的产后护理              |    55 |
| 20180103 | 母猪的产后护理              |    59 |
| 20180103 | 论萨达姆的战争准备          |    61 |
| 20180101 | 母猪的产后护理              |    78 |
| 20180101 | 论萨达姆的战争准备          |    88 |
| 20180102 | 论萨达姆的战争准备          |    98 |
| 20180102 | 母猪的产后护理              |   100 |
+----------+-----------------------------+-------+
8 rows in set (0.01 sec)
```

## 多个列的值进行排序
多个排序列之间用逗号 `,` 隔开就好了:
```
ORDER BY 列1 ASC|DESC, 列2 ASC|DESC ...
```
先按照`subjuect`排序,再按照`score`:
```
mysql> SELECT * FROM student_score ORDER BY subject, score DESC;
+----------+-----------------------------+-------+
| number   | subject                     | score |
+----------+-----------------------------+-------+
| 20180102 | 母猪的产后护理              |   100 |
| 20180101 | 母猪的产后护理              |    78 |
| 20180103 | 母猪的产后护理              |    59 |
| 20180104 | 母猪的产后护理              |    55 |
| 20180102 | 论萨达姆的战争准备          |    98 |
| 20180101 | 论萨达姆的战争准备          |    88 |
| 20180103 | 论萨达姆的战争准备          |    61 |
| 20180104 | 论萨达姆的战争准备          |    46 |
+----------+-----------------------------+-------+
8 rows in set (0.00 sec)
```
> 如果`ORDER BY`排序和`LIMIT`配合使用,`ORDER BY` 语句必须放在 `LIMIT` 语句前边.


